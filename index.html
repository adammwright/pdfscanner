<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PDF Scanner</title>
  <style>
    :root {
      --primary:      #1e3a5f;
      --accent:       #2563eb;
      --accent-hover: #1d4ed8;
      --bg:           #f1f5f9;
      --card:         #ffffff;
      --text:         #1e293b;
      --muted:        #64748b;
      --border:       #e2e8f0;
      --success:      #16a34a;
      --warn-bg:      #fef9c3;
      --warn-hover:   #fef08a;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    /* â”€â”€ Header â”€â”€ */
    header {
      background: var(--primary);
      color: #fff;
      padding: 1.5rem 2rem;
    }
    header h1 { font-size: 1.4rem; font-weight: 700; }
    header p  { font-size: 0.85rem; opacity: 0.75; margin-top: 0.25rem; }

    /* â”€â”€ Layout â”€â”€ */
    main {
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1rem;
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1.5rem;
    }

    .card h2 {
      font-size: 0.75rem;
      font-weight: 700;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.07em;
      margin-bottom: 1rem;
    }

    /* â”€â”€ Keywords â”€â”€ */
    #keywordTags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .kw-tag {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      background: #dbeafe;
      color: #1e40af;
      border-radius: 999px;
      padding: 0.3rem 0.625rem 0.3rem 0.875rem;
      font-size: 0.825rem;
      font-weight: 500;
    }

    .kw-tag button {
      background: none;
      border: none;
      cursor: pointer;
      color: #3b82f6;
      font-size: 1.1rem;
      line-height: 1;
      padding: 0;
    }
    .kw-tag button:hover { color: #1e40af; }

    .kw-add {
      display: flex;
      gap: 0.5rem;
    }

    .kw-add input {
      flex: 1;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.5rem 0.75rem;
      font-size: 0.875rem;
      outline: none;
      color: var(--text);
    }
    .kw-add input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(37,99,235,0.12);
    }

    /* â”€â”€ Drop zone â”€â”€ */
    .drop-zone {
      border: 2px dashed var(--border);
      border-radius: 8px;
      padding: 2.5rem 1rem;
      text-align: center;
      cursor: pointer;
      transition: border-color 0.2s, background 0.2s;
      color: var(--muted);
      user-select: none;
    }
    .drop-zone:hover,
    .drop-zone.drag-over {
      border-color: var(--accent);
      background: #eff6ff;
      color: var(--accent);
    }
    .drop-zone .dz-icon { font-size: 2.5rem; margin-bottom: 0.5rem; }
    .drop-zone strong   { font-size: 0.95rem; }
    .drop-zone p        { font-size: 0.8rem; margin-top: 0.25rem; }

    .file-ready {
      display: none;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.75rem;
      padding: 0.5rem 0.875rem;
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 6px;
      font-size: 0.85rem;
      color: var(--success);
    }
    .file-ready.visible { display: flex; }

    /* â”€â”€ Buttons â”€â”€ */
    .btn {
      padding: 0.6rem 1.2rem;
      border-radius: 6px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      border: none;
      transition: background 0.15s, opacity 0.15s;
    }

    .btn-primary {
      background: var(--accent);
      color: #fff;
      width: 100%;
      padding: 0.8rem;
      font-size: 1rem;
    }
    .btn-primary:hover:not(:disabled) { background: var(--accent-hover); }
    .btn-primary:disabled { opacity: 0.45; cursor: not-allowed; }

    .btn-outline {
      background: #fff;
      color: var(--text);
      border: 1px solid var(--border);
    }
    .btn-outline:hover { background: var(--bg); }

    .btn-success {
      background: var(--success);
      color: #fff;
    }
    .btn-success:hover { background: #15803d; }

    /* â”€â”€ Progress â”€â”€ */
    #progressSection { display: none; }

    .progress-track {
      background: var(--border);
      border-radius: 999px;
      height: 10px;
      overflow: hidden;
      margin: 0.75rem 0 0.5rem;
    }
    .progress-fill {
      height: 100%;
      background: var(--accent);
      border-radius: 999px;
      transition: width 0.25s ease;
      width: 0%;
    }
    .progress-label {
      font-size: 0.825rem;
      color: var(--muted);
    }

    /* â”€â”€ Results â”€â”€ */
    #resultsSection { display: none; }

    .results-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 1rem;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .results-header h2  { margin-bottom: 0.2rem; }
    #resultCount { font-size: 0.825rem; color: var(--muted); }

    .table-wrap {
      overflow-x: auto;
      border: 1px solid var(--border);
      border-radius: 8px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }
    thead { background: var(--bg); }
    th {
      padding: 0.65rem 1rem;
      text-align: left;
      font-weight: 600;
      font-size: 0.7rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      border-bottom: 1px solid var(--border);
    }
    td {
      padding: 0.6rem 1rem;
      border-bottom: 1px solid var(--border);
      vertical-align: top;
    }
    tr:last-child td { border-bottom: none; }
    tbody tr:hover td { background: #f8fafc; }

    /* Image rows */
    .row-image td             { background: var(--warn-bg); }
    .row-image:hover td       { background: var(--warn-hover); }

    td.col-kw   { font-weight: 600; white-space: nowrap; }
    td.col-pg   { text-align: center; font-family: monospace; white-space: nowrap; color: var(--muted); }
    td.col-ctx  { color: var(--muted); max-width: 480px; word-break: break-word; }

    .empty-state {
      text-align: center;
      padding: 2.5rem;
      color: var(--muted);
      font-style: italic;
    }

    footer {
      text-align: center;
      font-size: 0.75rem;
      color: var(--muted);
      padding: 2rem 1rem;
    }
  </style>
</head>
<body>

<header>
  <h1>PDF Scanner</h1>
  <p>Scan documents for sensitive keywords and flagged image content â€” processed entirely in your browser</p>
</header>

<main>

  <!-- Keywords card -->
  <div class="card">
    <h2>Keywords to scan for</h2>
    <div id="keywordTags"></div>
    <div class="kw-add">
      <input
        type="text"
        id="keywordInput"
        placeholder="Add a keyword or phrase and press Enterâ€¦"
        autocomplete="off"
      />
      <button class="btn btn-outline" onclick="addKeyword()">Add</button>
    </div>
  </div>

  <!-- Upload card -->
  <div class="card">
    <h2>Document</h2>
    <div class="drop-zone" id="dropZone">
      <div class="dz-icon">ðŸ“„</div>
      <strong>Drag &amp; drop a PDF here</strong>
      <p>or click to browse your files</p>
    </div>
    <input type="file" id="fileInput" accept=".pdf" style="display:none" />
    <div class="file-ready" id="fileReady">
      âœ… <span id="fileName">â€”</span>
    </div>
  </div>

  <!-- Scan button -->
  <button class="btn btn-primary" id="scanBtn" disabled onclick="startScan()">
    Scan PDF
  </button>

  <!-- Progress card -->
  <div class="card" id="progressSection">
    <h2>Progress</h2>
    <div class="progress-track">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <p class="progress-label" id="progressLabel">Startingâ€¦</p>
  </div>

  <!-- Results card -->
  <div class="card" id="resultsSection">
    <div class="results-header">
      <div>
        <h2>Results</h2>
        <p id="resultCount"></p>
      </div>
      <button class="btn btn-success" onclick="downloadCSV()">â¬‡ Download CSV</button>
    </div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Keyword</th>
            <th>Page</th>
            <th>Context</th>
          </tr>
        </thead>
        <tbody id="resultsBody"></tbody>
      </table>
    </div>
  </div>

</main>

<footer>Documents are never uploaded or stored â€” all processing happens locally in your browser.</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script src="app.js"></script>

</body>
</html>
